<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <main id="content" class="content-area">
            <div id="start-page" class="page">
                <h1>Welcome to Task Tracker</h1>
                <p>This is the start page. Your tasks and settings will appear here.</p>
            </div>
            <div id="tasks-page" class="page d-none">
                <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
                    <h1 class="me-auto">Tasks</h1>
                    <div class="d-flex align-items-center">
                        <div class="me-2">
                            <label for="priority-filter" class="form-label visually-hidden">Filter by Priority</label>
                            <select id="priority-filter" class="form-select form-select-sm">
                                <option value="all" selected>All Priorities</option>
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        <button id="add-task-btn" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#task-modal">
                            <i class="bi bi-plus-lg"></i> <span class="d-none d-sm-inline">Add Task</span>
                        </button>
                    </div>
                </div>
                <div id="today-tasks-container">
                    <h4 class="mb-3">Today</h4>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover align-middle">
                            <tbody id="today-task-list">
                                <!-- Task rows will be injected by script.js -->
                            </tbody>
                        </table>
                    </div>
                    <p id="today-empty-message" class="text-center text-muted d-none"></p>
                </div>
                <hr class="my-4">
                <div id="upcoming-tasks-container">
                    <h4 class="mb-3">Upcoming</h4>
                     <div class="table-responsive">
                        <table class="table table-striped table-hover align-middle">
                            <tbody id="upcoming-task-list">
                                <!-- Task rows will be injected by script.js -->
                            </tbody>
                        </table>
                    </div>
                    <p id="upcoming-empty-message" class="text-center text-muted d-none"></p>
                </div>
            </div>
            <div id="calendar-page" class="page d-none p-0">
                <div id="calendar-container" class="h-100">
                    <!-- Calendar will be rendered here by script.js -->
                </div>
            </div>
            <div id="settings-page" class="page d-none">
                <h1>Settings</h1>

                <div class="container">
                    <h2>Theme Settings</h2>
                    <div class="mb-3">
                        <label for="theme-select" class="form-label">Theme</label>
                        <select id="theme-select" class="form-select">
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="primary">Primary</option>
                            <option value="success">Success</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    <div id="custom-theme-settings" class="d-none">
                        <h4>Custom Colors</h4>
                        <div class="mb-3">
                            <label for="content-bg-color" class="form-label">Content Background</label>
                            <input type="color" id="content-bg-color" class="form-control form-control-color" value="#ffffff">
                        </div>
                        <div class="mb-3">
                            <label for="navbar-bg-color" class="form-label">Navbar Background</label>
                            <input type="color" id="navbar-bg-color" class="form-control form-control-color" value="#f8f9fa">
                        </div>
                    </div>
                    <hr class="my-4">
                    <h2>Data Management</h2>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                        <button id="export-data-btn" class="btn btn-secondary">Export Data</button>
                        <button id="import-data-btn" class="btn btn-secondary">Import Data</button>
                        <input type="file" id="import-file-input" class="d-none" accept=".json">
                    </div>

                    <hr class="my-4">
                    <h2>Developer Settings</h2>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="dev-mode-toggle">
                        <label class="form-check-label" for="dev-mode-toggle">Enable Developer Mode</label>
                    </div>
                    <div id="dev-settings-panel" class="d-none mt-3 p-3 border rounded">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="launch-last-section-toggle">
                            <label class="form-check-label" for="launch-last-section-toggle">Launch the last viewed section on start</label>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <nav id="navbar" class="navbar">
            <div id="main-nav-links" class="d-flex justify-content-around flex-grow-1">
                <a href="#start" class="nav-link active" data-page="start-page"><i class="bi bi-house-door fs-4"></i> <span class="nav-text">Start</span></a>
                <a href="#tasks" class="nav-link" data-page="tasks-page"><i class="bi bi-list-check fs-4"></i> <span class="nav-text">Tasks</span></a>
                <a href="#calendar" class="nav-link" data-page="calendar-page"><i class="bi bi-calendar-event fs-4"></i> <span class="nav-text">Calendar</span></a>
                <a href="#settings" class="nav-link" data-page="settings-page"><i class="bi bi-gear fs-4"></i> <span class="nav-text">Settings</span></a>
            </div>

            <div id="calendar-nav-controls" class="d-none align-items-center mx-auto">
                <button id="nav-prev-month-btn" class="btn btn-outline-secondary btn-sm">&lt;</button>
                <span id="nav-month-year" class="mx-2 fw-bold text-center" style="min-width: 120px;"></span>
                <button id="nav-next-month-btn" class="btn btn-outline-secondary btn-sm">&gt;</button>
            </div>
        </nav>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>

    <!-- Task Modal -->
    <div class="modal fade" id="task-modal" tabindex="-1" aria-labelledby="task-modal-label" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="task-modal-label">Add/Edit Task</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="task-form">
                        <input type="hidden" id="task-id">
                        <div class="mb-3">
                            <label for="task-title" class="form-label">Title</label>
                            <input type="text" class="form-control" id="task-title" required>
                        </div>
                        <div class="mb-3">
                            <label for="task-description" class="form-label">Description</label>
                            <textarea class="form-control" id="task-description" rows="3"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="task-priority" class="form-label">Priority</label>
                                <select class="form-select" id="task-priority">
                                    <option value="low">Low</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="task-due-date" class="form-label">Due Date</label>
                                <input type="date" class="form-control" id="task-due-date">
                            </div>
                        </div>
                         <div class="mb-3">
                            <label for="task-tags" class="form-label">Tags (comma-separated)</label>
                            <input type="text" class="form-control" id="task-tags">
                        </div>
                        <div class="mb-3">
                            <label for="task-notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="task-notes" rows="2"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="task-recurrence" class="form-label">Recurrence</label>
                            <select class="form-select" id="task-recurrence">
                                <option value="none" selected>None</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="yearly">Yearly</option>
                            </select>
                        </div>
                        <!-- "Is Complete" checkbox is removed from the modal, as completion will be handled on the task card for specific instances -->

                        <hr class="my-3">
                        <h5>Subtasks</h5>
                        <div id="subtask-list-modal" class="mb-2">
                            <!-- Subtasks for the task being edited will appear here -->
                        </div>
                        <div class="input-group">
                            <input type="text" id="new-subtask-input" class="form-control" placeholder="Add a new subtask...">
                            <button class="btn btn-outline-secondary" type="button" id="add-subtask-btn-modal">Add</button>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" form="task-form" class="btn btn-primary">Save Task</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
